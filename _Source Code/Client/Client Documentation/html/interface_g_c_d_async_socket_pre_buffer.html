<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Mobile Clinic: GCDAsyncSocketPreBuffer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="clinicLogo.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Mobile Clinic
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Senior Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">GCDAsyncSocketPreBuffer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for GCDAsyncSocketPreBuffer:</div>
<div class="dyncontent">
<div class="center"><img src="interface_g_c_d_async_socket_pre_buffer__inherit__graph.png" border="0" usemap="#_g_c_d_async_socket_pre_buffer_inherit__map" alt="Inheritance graph"/></div>
<map name="_g_c_d_async_socket_pre_buffer_inherit__map" id="_g_c_d_async_socket_pre_buffer_inherit__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for GCDAsyncSocketPreBuffer:</div>
<div class="dyncontent">
<div class="center"><img src="interface_g_c_d_async_socket_pre_buffer__coll__graph.png" border="0" usemap="#_g_c_d_async_socket_pre_buffer_coll__map" alt="Collaboration graph"/></div>
<map name="_g_c_d_async_socket_pre_buffer_coll__map" id="_g_c_d_async_socket_pre_buffer_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac79b91270c187da975fa1a9872923c1a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac79b91270c187da975fa1a9872923c1a"></a>
(id)&#160;</td><td class="memItemRight" valign="bottom">- <b>initWithCapacity:</b></td></tr>
<tr class="memitem:abfb9bd7620a0f33f1a5d7256e2185c0b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abfb9bd7620a0f33f1a5d7256e2185c0b"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>ensureCapacityForWrite:</b></td></tr>
<tr class="memitem:abf7981d618a29afd4856e0869dc1fce5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf7981d618a29afd4856e0869dc1fce5"></a>
(size_t)&#160;</td><td class="memItemRight" valign="bottom">- <b>availableBytes</b></td></tr>
<tr class="memitem:aea5a7627cb8566912ace1047d70f260e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea5a7627cb8566912ace1047d70f260e"></a>
(uint8_t *)&#160;</td><td class="memItemRight" valign="bottom">- <b>readBuffer</b></td></tr>
<tr class="memitem:a1c4a0b244e24ebdcacabba1ee819219a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c4a0b244e24ebdcacabba1ee819219a"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>getReadBuffer:availableBytes:</b></td></tr>
<tr class="memitem:a54f351015bb88b56e04592a9e0699d94"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a54f351015bb88b56e04592a9e0699d94"></a>
(size_t)&#160;</td><td class="memItemRight" valign="bottom">- <b>availableSpace</b></td></tr>
<tr class="memitem:af37bbfe76155c190149d2800f58c020b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af37bbfe76155c190149d2800f58c020b"></a>
(uint8_t *)&#160;</td><td class="memItemRight" valign="bottom">- <b>writeBuffer</b></td></tr>
<tr class="memitem:a997a2d58c751a58c3fe88fb5c758ab1c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a997a2d58c751a58c3fe88fb5c758ab1c"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>getWriteBuffer:availableSpace:</b></td></tr>
<tr class="memitem:a33dd2afab5869538055cbe50a019c70e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a33dd2afab5869538055cbe50a019c70e"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>didRead:</b></td></tr>
<tr class="memitem:a0f1ddfb18df2f42fa4550518cd05446f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f1ddfb18df2f42fa4550518cd05446f"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>didWrite:</b></td></tr>
<tr class="memitem:ad20897c5c8bd47f5d4005989bead0e55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad20897c5c8bd47f5d4005989bead0e55"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>reset</b></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a08053792211b752cbe12ae8db285d1f7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08053792211b752cbe12ae8db285d1f7"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>preBuffer</b></td></tr>
<tr class="memitem:ab3332bba56a8530c792801aa0afaf694"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab3332bba56a8530c792801aa0afaf694"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>preBufferSize</b></td></tr>
<tr class="memitem:a8d9e9cde872c790f8806566d785d1fcb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d9e9cde872c790f8806566d785d1fcb"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>readPointer</b></td></tr>
<tr class="memitem:a1824629432ffb356a6495cb938765958"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1824629432ffb356a6495cb938765958"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>writePointer</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A PreBuffer is used when there is more data available on the socket than is being requested by current read request. In this case we slurp up all data from the socket (to minimize sys calls), and store additional yet unread data in a "prebuffer".</p>
<p>The prebuffer is entirely drained before we read from the socket again. In other words, a large chunk of data is written is written to the prebuffer. The prebuffer is then drained via a series of one or more reads (for subsequent read request(s)).</p>
<p>A ring buffer was once used for this purpose. But a ring buffer takes up twice as much memory as needed (double the size for mirroring). In fact, it generally takes up more than twice the needed size as everything has to be rounded up to vm_page_size. And since the prebuffer is always completely drained after being written to, a full ring buffer isn't needed.</p>
<p>The current design is very simple and straight-forward, while also keeping memory requirements lower. </p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>GCDAsyncSocket.m</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 3 2013 20:57:26 for Mobile Clinic by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
