<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Mobile Clinic: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="clinicLogo.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Mobile Clinic
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Senior Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="interface_test_flight.html">TestFlight</a> SDK allows you to track how beta testers are testing your application. Out of the box we track simple usage information, such as which tester is using your application, their device model/OS, how long they used the application, logs of their test session, and automatic recording of any crashes they encounter.</p>
<p>To get the most out of the SDK we have provided the Checkpoint API.</p>
<p>The Checkpoint API is used to help you track exactly how your testers are using your application. Curious about which users passed level 5 in your game, or posted their high score to Twitter, or found that obscure feature? With a single line of code you can finally gather all this information. Wondering how many times your app has crashed? Wondering who your power testers are? We've got you covered. See more information on the Checkpoint API in section 4.</p>
<p>Alongside the Checkpoint API is the Questions interface. The Questions interface is managed on a per build basis on the <a class="el" href="interface_test_flight.html">TestFlight</a> website. Find out more about the Questions Interface in section 6.</p>
<p>For more detailed debugging we have a remote logging solution. Find out more about our logging system with TFLog in the Remote Logging section.</p>
<h1>Considerations</h1>
<p>Information gathered by the SDK is sent to the website in real time. When an application is put into the background (iOS 4.x) or terminated (iOS 3.x) we try to send the finalizing information for the session during the time allowed for finalizing the application. Should all of the data not get sent the remaining data will be sent the next time the application is launched. As such, to get the most out of the SDK we recommend your application support iOS 4.0 and higher.</p>
<p>This SDK can be run from both the iPhone Simulator and Device and has been tested using Xcode 4.0.</p>
<h1>Integration</h1>
<ol type="1">
<li>Add the files to your project: File -&gt; Add Files to " "<ol type="a">
<li>Find and select the folder that contains the SDK</li>
<li>Make sure that "Copy items into destination folder (if needed)" is checked</li>
<li>Set Folders to "Create groups for any added folders"</li>
<li>Select all targets that you want to add the SDK to</li>
</ol>
</li>
<li>Verify that libTestFlight.a has been added to the Link Binary With Libraries Build Phase for the targets you want to use the SDK with<ol type="a">
<li>Select your Project in the Project Navigator</li>
<li>Select the target you want to enable the SDK for</li>
<li>Select the Build Phases tab</li>
<li>Open the Link Binary With Libraries Phase</li>
<li>If libTestFlight.a is not listed, drag and drop the library from your Project Navigator to the Link Binary With Libraries area</li>
<li>Repeat Steps 2 - 5 until all targets you want to use the SDK with have the SDK linked</li>
</ol>
</li>
<li>Add libz to your Link Binary With Libraries Build Phase<ol type="a">
<li>Select your Project in the Project Navigator</li>
<li>Select the target you want to enable the SDK for</li>
<li>Select the Build Phases tab</li>
<li>Open the Link Binary With Libraries Phase</li>
<li>Click the + to add a new library</li>
<li>Find libz.dylib in the list and add it</li>
<li>Repeat Steps 2 - 6 until all targets you want to use the SDK with have libz.dylib</li>
</ol>
</li>
</ol>
<ol type="1">
<li><p class="startli">In your Application Delegate:</p>
<ol type="a">
<li><p class="startli">Import <a class="el" href="interface_test_flight.html">TestFlight</a>: <code>#import "TestFlight.h"</code></p>
<p class="startli">***NOTE:*** Rather than importing <code><a class="el" href="_test_flight_8h_source.html">TestFlight.h</a></code> in every file you may add the above line into you pre-compiled header (<code>&lt;projectname&gt;_Prefix.pch</code>) file inside of the </p>
<pre class="fragment">#ifdef __OBJC__ 
</pre><p class="startli">section. This will give you access to the SDK across all files.</p>
</li>
</ol>
<ol type="a">
<li>Get your Team Token which you can find at <a href="http://testflightapp.com/dashboard/team/">http://testflightapp.com/dashboard/team/</a> select the team you are using from the team selection drop down list on the top of the page and then select Team Info.</li>
</ol>
<ol type="a">
<li>Launch <a class="el" href="interface_test_flight.html">TestFlight</a> with your Team Token <pre class="fragment"> -(BOOL)application:(UIApplication *)application 
     didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
 // start of your application:didFinishLaunchingWithOptions 
 // ...
 [TestFlight takeOff:@"Insert your Team Token here"];
 // The rest of your application:didFinishLaunchingWithOptions method
 // ...
 }
</pre></li>
</ol>
<ol type="a">
<li>To report crashes to you we install our own uncaught exception handler. If you are not currently using an exception handler of your own then all you need to do is go to the next step. If you currently use an Exception Handler, or you use another framework that does please go to the section on advanced exception handling.</li>
</ol>
</li>
</ol>
<ol type="1">
<li><p class="startli">To enable the best crash reporting possible we recommend setting the following project build settings in Xcode to NO for all targets that you want to have live crash reporting for. You can find build settings by opening the Project Navigator (default command+1 or command+shift+j) then clicking on the project you are configuring (usually the first selection in the list). From there you can choose to either change the global project settings or settings on an individual project basis. All settings below are in the Deployment Section.</p>
<ol type="a">
<li>Deployment Post Processing</li>
<li>Strip Debug Symbols During Copy</li>
<li>Strip Linked Product</li>
</ol>
</li>
</ol>
<h1>Beta Testing and Release Differentiation</h1>
<p>In order to provide more information about your testers while beta testing you will need to provide the device's unique identifier. This identifier is not something that the SDK will collect from the device and we do not recommend using this in production. To send the device identifier to us put the following code before your call to takeOff. </p>
<pre class="fragment">#define TESTING 1
#ifdef TESTING
    [TestFlight setDeviceIdentifier:[[UIDevice currentDevice] uniqueIdentifier]];
#endif
</pre><p>This will allow you to have the best possible information during testing, but disable getting and sending of the device unique identifier when you release your application. When it is time to release simply comment out #define TESTING 1. If you decide to not include the device's unique identifier during your testing phase <a class="el" href="interface_test_flight.html">TestFlight</a> will still collect all of the information that you send but it may be anonymized.</p>
<h1>Checkpoint API</h1>
<p>When a tester does something you care about in your app you can pass a checkpoint. For example completing a level, adding a todo item, etc. The checkpoint progress is used to provide insight into how your testers are testing your apps. The passed checkpoints are also attached to crashes, which can help when creating steps to replicate.</p>
<p><code>[<a class="el" href="interface_test_flight.html">TestFlight</a> passCheckpoint:@"CHECKPOINT_NAME"];</code> Use <code>passCheckpoint:</code> to track when a user performs certain tasks in your application. This can be useful for making sure testers are hitting all parts of your application, as well as tracking which testers are being thorough.</p>
<h1>Feedback API</h1>
<p>To launch unguided feedback call the openFeedbackView method. We recommend that you call this from a GUI element. </p>
<pre class="fragment">-(IBAction)launchFeedback {
    [TestFlight openFeedbackView];
}
</pre><p>If you want to create your own feedback form you can use the submitCustomFeedback method to submit the feedback that the user has entered. </p>
<pre class="fragment">-(IBAction)submitFeedbackPressed:(id)sender {
    NSString *feedback = [self getUserFeedback];
    [TestFlight submitFeedback:feedback];
}
</pre><p>The above sample assumes that [self getUserFeedback] is implemented such that it obtains the users feedback from the GUI element you have created and that submitFeedbackPressed is the action for your submit button.</p>
<p>Once users have submitted feedback from inside of the application you can view it in the feedback area of your build page.</p>
<h1>Upload your build</h1>
<p>After you have integrated the SDK into your application you need to upload your build to <a class="el" href="interface_test_flight.html">TestFlight</a>. You can upload from your dashboard or or using the Upload API, full documentation at <a href="https://testflightapp.com/api/doc/">https://testflightapp.com/api/doc/</a></p>
<h1>Questions Interface</h1>
<p>In order to ask a question, you'll need to associate it with a checkpoint. Make sure your checkpoints are initialized by running your app and hitting them all yourself before you start adding questions.</p>
<p>There are three question types available: Yes/No, Multiple Choice, and Long Answer.</p>
<p>To create questions, visit your builds Questions page and click on 'Add Question'. If you choose Multiple Choice, you'll need to enter a list of possible answers for your testers to choose from — otherwise, you'll only need to enter your question's, well, question. If your build has no questions, you can also choose to migrate questions from another build (because seriously — who wants to do all that typing again)?</p>
<p>After restarting your application on an approved device, when you pass the checkpoint associated with your questions a <a class="el" href="interface_test_flight.html">TestFlight</a> modal question form will appear on the screen asking the beta tester to answer your question.</p>
<p>After you upload a new build to <a class="el" href="interface_test_flight.html">TestFlight</a> you will need to associate questions once again. However if your checkpoints and questions have remained the same you can choose "copy questions from an older build" and choose which build to copy the questions from.</p>
<h1>View the results</h1>
<p>As testers install your build and start to test it you will see their session data on the web on the build report page for the build you've uploaded.</p>
<h1>Advanced Exception Handling</h1>
<p>An uncaught exception means that your application is in an unknown state and there is not much that you can do but try and exit gracefully. Our SDK does its best to get the data we collect in this situation to you while it is crashing, but it is designed in such a way that the important act of saving the data occurs in as safe way a way as possible before trying to send anything. If you do use uncaught exception or signal handlers install your handlers before calling <code>takeOff</code>. Our SDK will then call your handler while ours is running. For example: </p>
<pre class="fragment">  /*
   My Apps Custom uncaught exception catcher, we do special stuff here, and TestFlight takes care of the rest
  */
  void HandleExceptions(NSException *exception) {
    NSLog(@"This is where we save the application data during a exception");
    // Save application data on crash
  }
  /*
   My Apps Custom signal catcher, we do special stuff here, and TestFlight takes care of the rest
  */
  void SignalHandler(int sig) {
    NSLog(@"This is where we save the application data during a signal");
    // Save application data on crash
  }

  -(BOOL)application:(UIApplication *)application 
  didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    // installs HandleExceptions as the Uncaught Exception Handler
    NSSetUncaughtExceptionHandler(&amp;HandleExceptions);
    // create the signal action structure 
    struct sigaction newSignalAction;
    // initialize the signal action structure
    memset(&amp;newSignalAction, 0, sizeof(newSignalAction));
    // set SignalHandler as the handler in the signal action structure
    newSignalAction.sa_handler = &amp;SignalHandler;
    // set SignalHandler as the handlers for SIGABRT, SIGILL and SIGBUS
    sigaction(SIGABRT, &amp;newSignalAction, NULL);
    sigaction(SIGILL, &amp;newSignalAction, NULL);
    sigaction(SIGBUS, &amp;newSignalAction, NULL);
    // Call takeOff after install your own unhandled exception and signal handlers
    [TestFlight takeOff:@"Insert your Team Token here"];
    // continue with your application initialization
  }
</pre><p>You do not need to add the above code if your application does not use exception handling already.</p>
<h1>Remote Logging</h1>
<p>To perform remote logging you can use the TFLog method which logs in a few different methods described below. In order to make the transition from NSLog to TFLog easy we have used the same method signature for TFLog as NSLog. You can easily switch over to TFLog by adding the following macro to your header </p>
<pre class="fragment">#define NSLog TFLog
</pre><p>That will do a switch from NSLog to TFLog, if you want more information, such as file name and line number you can use a macro like </p>
<pre class="fragment">#define NSLog(__FORMAT__, ...) TFLog((@"%s [Line %d] " __FORMAT__), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__)
</pre><p>Which will produce output that looks like </p>
<pre class="fragment">-[HTFCheckpointsController showYesNoQuestion:] [Line 45] Pressed YES/NO
</pre><p>We have implemented three different loggers. </p>
<pre class="fragment">1. TestFlight logger
2. Apple System Log logger
3. STDERR logger
</pre><p>Each of the loggers log asynchronously and all TFLog calls are non blocking. The <a class="el" href="interface_test_flight.html">TestFlight</a> logger writes its data to a file which is then sent to our servers on Session End events. The Apple System Logger sends its messages to the Apple System Log and are viewable using the Organizer in Xcode when the device is attached to your computer. The ASL logger can be disabled by turning it off in your <a class="el" href="interface_test_flight.html">TestFlight</a> options </p>
<pre class="fragment">[TestFlight setOptions:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] forKey:@"logToConsole"]];
</pre><p>The default option is YES.</p>
<p>The STDERR logger sends log messages to STDERR so that you can see your log statements while debugging. The STDERR logger is only active when a debugger is attached to your application. If you do not wish to use the STDERR logger you can disable it by turning it off in your <a class="el" href="interface_test_flight.html">TestFlight</a> options </p>
<pre class="fragment">[TestFlight setOptions:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] forKey:@"logToSTDERR"]];
</pre><p>The default option is YES.</p>
<h1>Advanced Remote Logging</h1>
<p>For most users we expect using TFLog to provide all of the logging functionality that they need. For the occasion where you need to provide a wrapper around TFLog we provide </p>
<pre class="fragment">void TFLogv(NSString *format, va_list arg_list);
</pre><p>Using TFLogv you can have your method that accepts a variable number of arguments that then passes that format and argument list to TFLog.</p>
<h1>iOS3</h1>
<p>We now require that anyone who is writing an application that supports iOS3 add the System.framework as an optional link. In order to provide a better shutdown experience we send any large log files to our servers in the background. To add System.framework as an optional link:</p>
<ol type="1">
<li>Select your Project in the Project Navigator</li>
<li>Select the target you want to enable the SDK for</li>
<li>Select the Build Phases tab</li>
<li>Open the Link Binary With Libraries Phase</li>
<li>Click the + to add a new library</li>
<li>Find libSystem.dylib in the list and add it</li>
<li>To the right of libSystem.dylib in the Link Binary With Libraries pane change "Required" to "Optional" </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 3 2013 20:57:25 for Mobile Clinic by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
